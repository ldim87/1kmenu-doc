# Настройка рабочей площадки

## Подключение к приватному репозиторию

Для подключения к репозиторию вам необходим SSH ключ, который вы генерируете у себя локально. Публичную часть вы присылаете нам на *support@1000.menu* и мы активируем вход по этому ключу к вашему личному репозиторию. Приватную часть вы сохраняете у себя локально в безопасном месте.

Скачать программу для генерации ключей на Windows: [puttygen.exe](https://www.chiark.greenend.org.uk/~sgtatham/putty/latest.html)

Параметры ключей:  
Тип: **SSH-2 RSA**  
Кол-во битов: **2048**

Далее свой приватный ключ вы загружаете в память с помощью агента.  
Агент ключей для Windows: [pageant.exe](https://www.chiark.greenend.org.uk/~sgtatham/putty/latest.html)

Если у вас еще не установлен Git, то [установите его](https://git-scm.com/download/win) и настройте переменную системы **GIT_SSH=Полный\путь\к\plink.exe**, чтобы Git мог использовать Pageant как агента ключей (должен быть в той же папке, что и pageant.exe, putty.exe).

Для того, чтобы склонировать свой личный репозиторий на свой локальный компьютер, используйте следующий адрес:

ssh://{имя_пользователя}@vgit1.aynos.cz/~/1000.menu

Также добавьте в *remotes* общий репозиторий **shared**, с которого вы будете загружать обновления. Данный репозиторий только для чтения:

https://vgit1.aynos.cz/shared.git/ (используйте логин и пароль, который вы получили от нас)

## SSH

Подключиться к SSH сессии вы сможете после настройки ключей (см. выше) следующим образом:

ssh://{имя_пользователя}@vgit1.aynos.cz

### Веб-хостинг репозитория

Ваш репозиторий находится по адресу:

https://{имя_пользователя}.aynos.cz (используйте логин и пароль, который вы получили от нас)

> Так как SSL использует собой подписанный сертификат, вам нужно сделать исключение в браузере, чтобы перейти далее на свою площадку.

## Смена ветки репозитория

Иногда необходимо создать новую ветку. По умолчанию используется ветка **master**, но вы можете создавать любое кол-во веток. Для работы в отдельной ветке создайте у себя локально ветку "**wip**". После этого сделайте push на сервер. Для того, чтобы переключить ветку на сервере, сначала подключитесь к [SSH сессии](/workplace?id=ssh), затем введите:

> checkout wip (или название ветки, которую вы создали)

## Очистка файлового кэша

Чтобы очистить файловый кэш на сервере, подключитесь к [SSH сессии](/workplace?id=ssh), затем введите:

> reset-filecache

## Composer

По умолчанию используются пакеты из общего репозитория (из ресурса shared), поэтому чтобы установить на своей площадке пакеты из своего package.json, подключитесь к [SSH сессии](/workplace?id=ssh), затем введите:

> composer install

Чтобы удалить папку **vendor** на своей площадке и использовать пакеты по умолчанию, введите:

> composer reset

## Подключение к Xdebug

Чтобы использовать Xdebug, необходимо сначала подключиться к [SSH сессии](/workplace?id=ssh) с настройками туннеля (Putty):

![Putty tunnel](/img/putty_tunnel.png "Настройки туннеля Putty")

> Вместо **XXXX** введите номер порта, который выдает ф-ция **phpinfo()** в настройке **xdebug.remote_port**

Также клиенту необходимо настроить пролинковку путей:

> Удаленный путь : /{имя_пользователя}/1000.menu/

> Локальный путь : /Локальный/полный/путь/к/репозиторию/

Если вы используете редактор **Sublime**, то **User** настройка выглядит так:

```json
{
    "path_mapping": {
        "/{имя_пользователя}/1000.menu/" : "/Локальный/полный/путь/к/репозиторию/"
    },
    "host": "localhost",
    "port": XXXX
}
```

Аналогичные настройки должны быть в любом редакторе.

## Подключение к phpMyAdmin

Для подключения к phpMyAdmin используйте SSH тунель.  
Программа для Windows: [putty.exe](https://www.chiark.greenend.org.uk/~sgtatham/putty/latest.html)

Настройки сессии:  
Адрес: **195.201.5.66:2212**

Настройки тунеля:  
Локальный порт: **8888** (на свое усмотрение)  
Удаленный адрес: **localhost:80**

Подключитесь к сессии с помощью своего логина (для входа используется ключ от приватного репозитория). После подключения к сессии phpMyAdmin будет доступен по адресу:

http://localhost:8888/phpmyadmin/ (данные для входа см. в /sys/param.php)

## Сдача работы

После выполнения задания сделайте rebase к master@shared и совместите все временные коммиты в один. После этого сделайте force-push в рабочую ветку (wip) и сообщите об этом администратору.

